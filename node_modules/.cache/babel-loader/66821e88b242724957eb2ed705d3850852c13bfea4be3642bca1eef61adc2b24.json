{"ast":null,"code":"import { createReducer } from \"@reduxjs/toolkit\";\nconst initState = {\n  products: [],\n  cart: checkCart()\n};\nexport const root = createReducer(initState, {\n  'product.load': (state, action) => {\n    // state.products = action.payload.products;\n    let products = action.payload.products;\n    let out = [];\n    let cart = checkCart();\n    lop1: for (const p of products) {\n      for (const c of cart) {\n        if (c.id === p.id) {\n          out.push({\n            ...p,\n            isBuying: true,\n            color: 'red'\n          });\n          continue lop1;\n        }\n      }\n      out.push({\n        ...p,\n        isBuying: false,\n        color: 'blue'\n      });\n    }\n    state.products = out;\n  },\n  'cart.add': (state, action) => {\n    if (!state.cart) state = checkCart();\n    state.cart = [...state.cart, action.payload.product];\n    saveCart(state.cart);\n  },\n  'cart.minus': (state, action) => {\n    if (!state.cart) state = checkCart();\n    let cart = state.cart.filter(product => product.id !== action.payload.product.id);\n    state.cart = [...cart];\n    saveCart(state.cart);\n  }\n});\nfunction checkCart() {\n  if (localStorage.getItem('cart')) {\n    return JSON.parse(localStorage.getItem('cart'));\n  }\n  return [];\n}\nfunction saveCart(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}","map":{"version":3,"names":["createReducer","initState","products","cart","checkCart","root","product.load","state","action","payload","out","lop1","p","c","id","push","isBuying","color","cart.add","product","saveCart","cart.minus","filter","localStorage","getItem","JSON","parse","setItem","stringify"],"sources":["D:/tour/src/Store/RootReducer.js"],"sourcesContent":["import {createReducer} from \"@reduxjs/toolkit\";\r\n\r\nconst initState = {\r\n    products: [],\r\n    cart: checkCart(),\r\n}\r\nexport const root=createReducer(initState,{\r\n    'product.load': (state, action) => {\r\n        // state.products = action.payload.products;\r\n        let products = action.payload.products;\r\n        let out=[];\r\n        let cart = checkCart();\r\n        lop1:for (const  p of products) {\r\n            for (const c of cart) {\r\n                if(c.id === p.id){\r\n                    out.push({...p, isBuying: true, color: 'red'});\r\n                    continue lop1;\r\n                }\r\n            }\r\n            out.push({...p, isBuying: false, color: 'blue'});\r\n        }\r\n\r\n        state.products = out;\r\n    },\r\n    'cart.add': (state, action) => {\r\n        if(!state.cart) state = checkCart();\r\n        state.cart = [...state.cart, action.payload.product];\r\n        saveCart(state.cart);\r\n    },\r\n    'cart.minus': (state, action) => {\r\n        if(!state.cart) state = checkCart();\r\n        let cart=  state.cart.filter(product => product.id !== action.payload.product.id);\r\n        state.cart = [...cart];\r\n        saveCart(state.cart);\r\n    }\r\n})\r\nfunction checkCart(){\r\n    if(localStorage.getItem('cart')){\r\n      return JSON.parse(localStorage.getItem('cart'));\r\n    }\r\n    return [];\r\n}\r\nfunction saveCart(cart){\r\n    localStorage.setItem('cart',JSON.stringify(cart));\r\n}\r\n\r\n"],"mappings":"AAAA,SAAQA,aAAa,QAAO,kBAAkB;AAE9C,MAAMC,SAAS,GAAG;EACdC,QAAQ,EAAE,EAAE;EACZC,IAAI,EAAEC,SAAS,CAAC;AACpB,CAAC;AACD,OAAO,MAAMC,IAAI,GAACL,aAAa,CAACC,SAAS,EAAC;EACtC,cAAc,EAAEK,CAACC,KAAK,EAAEC,MAAM,KAAK;IAC/B;IACA,IAAIN,QAAQ,GAAGM,MAAM,CAACC,OAAO,CAACP,QAAQ;IACtC,IAAIQ,GAAG,GAAC,EAAE;IACV,IAAIP,IAAI,GAAGC,SAAS,CAAC,CAAC;IACtBO,IAAI,EAAC,KAAK,MAAOC,CAAC,IAAIV,QAAQ,EAAE;MAC5B,KAAK,MAAMW,CAAC,IAAIV,IAAI,EAAE;QAClB,IAAGU,CAAC,CAACC,EAAE,KAAKF,CAAC,CAACE,EAAE,EAAC;UACbJ,GAAG,CAACK,IAAI,CAAC;YAAC,GAAGH,CAAC;YAAEI,QAAQ,EAAE,IAAI;YAAEC,KAAK,EAAE;UAAK,CAAC,CAAC;UAC9C,SAASN,IAAI;QACjB;MACJ;MACAD,GAAG,CAACK,IAAI,CAAC;QAAC,GAAGH,CAAC;QAAEI,QAAQ,EAAE,KAAK;QAAEC,KAAK,EAAE;MAAM,CAAC,CAAC;IACpD;IAEAV,KAAK,CAACL,QAAQ,GAAGQ,GAAG;EACxB,CAAC;EACD,UAAU,EAAEQ,CAACX,KAAK,EAAEC,MAAM,KAAK;IAC3B,IAAG,CAACD,KAAK,CAACJ,IAAI,EAAEI,KAAK,GAAGH,SAAS,CAAC,CAAC;IACnCG,KAAK,CAACJ,IAAI,GAAG,CAAC,GAAGI,KAAK,CAACJ,IAAI,EAAEK,MAAM,CAACC,OAAO,CAACU,OAAO,CAAC;IACpDC,QAAQ,CAACb,KAAK,CAACJ,IAAI,CAAC;EACxB,CAAC;EACD,YAAY,EAAEkB,CAACd,KAAK,EAAEC,MAAM,KAAK;IAC7B,IAAG,CAACD,KAAK,CAACJ,IAAI,EAAEI,KAAK,GAAGH,SAAS,CAAC,CAAC;IACnC,IAAID,IAAI,GAAGI,KAAK,CAACJ,IAAI,CAACmB,MAAM,CAACH,OAAO,IAAIA,OAAO,CAACL,EAAE,KAAKN,MAAM,CAACC,OAAO,CAACU,OAAO,CAACL,EAAE,CAAC;IACjFP,KAAK,CAACJ,IAAI,GAAG,CAAC,GAAGA,IAAI,CAAC;IACtBiB,QAAQ,CAACb,KAAK,CAACJ,IAAI,CAAC;EACxB;AACJ,CAAC,CAAC;AACF,SAASC,SAASA,CAAA,EAAE;EAChB,IAAGmB,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAC;IAC9B,OAAOC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACjD;EACA,OAAO,EAAE;AACb;AACA,SAASJ,QAAQA,CAACjB,IAAI,EAAC;EACnBoB,YAAY,CAACI,OAAO,CAAC,MAAM,EAACF,IAAI,CAACG,SAAS,CAACzB,IAAI,CAAC,CAAC;AACrD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}