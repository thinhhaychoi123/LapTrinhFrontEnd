{"ast":null,"code":"// -----------------------RootReducer.js-----------------------\nimport { createReducer } from '@reduxjs/toolkit';\nconst initState = {\n  products: [],\n  cart: checkCart()\n};\nexport const root = createReducer(initState, builder => {\n  builder.addCase('product.load', (state, action) => {\n    const products = action.payload.products.filter(product => product !== null && product !== undefined);\n    const cart = checkCart();\n    const out = products.map(p => {\n      const isBuying = cart.some(c => c.id === p.id);\n      return {\n        ...p,\n        isBuying,\n        color: isBuying ? 'red' : 'blue'\n      };\n    });\n    state.products = out;\n  }).addCase('cart.add', (state, action) => {\n    const product = action.payload.product;\n    state.cart = [...state.cart, product];\n    saveCart(state.cart);\n  }).addCase('cart.minus', (state, action) => {\n    const productId = action.payload.product.id;\n    state.cart = state.cart.filter(product => product.id !== productId);\n    saveCart(state.cart);\n  });\n});\nfunction checkCart() {\n  const cart = JSON.parse(localStorage.getItem('cart')) || [];\n  return cart.filter(item => item !== null && item !== undefined);\n}\nfunction saveCart(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n\n// ----------------------------------------","map":{"version":3,"names":["createReducer","initState","products","cart","checkCart","root","builder","addCase","state","action","payload","filter","product","undefined","out","map","p","isBuying","some","c","id","color","saveCart","productId","JSON","parse","localStorage","getItem","item","setItem","stringify"],"sources":["D:/tour/src/Store/RootReducer.js"],"sourcesContent":["// -----------------------RootReducer.js-----------------------\r\nimport { createReducer } from '@reduxjs/toolkit';\r\n\r\nconst initState = {\r\n    products: [],\r\n    cart: checkCart(),\r\n};\r\n\r\nexport const root = createReducer(initState, (builder) => {\r\n    builder\r\n        .addCase('product.load', (state, action) => {\r\n            const products = action.payload.products.filter(product => product !== null && product !== undefined);\r\n            const cart = checkCart();\r\n            const out = products.map(p => {\r\n                const isBuying = cart.some(c => c.id === p.id);\r\n                return { ...p, isBuying, color: isBuying ? 'red' : 'blue' };\r\n            });\r\n            state.products = out;\r\n        })\r\n        .addCase('cart.add', (state, action) => {\r\n            const product = action.payload.product;\r\n            state.cart = [...state.cart, product];\r\n            saveCart(state.cart);\r\n        })\r\n        .addCase('cart.minus', (state, action) => {\r\n            const productId = action.payload.product.id;\r\n            state.cart = state.cart.filter(product => product.id !== productId);\r\n            saveCart(state.cart);\r\n        });\r\n});\r\n\r\nfunction checkCart() {\r\n    const cart = JSON.parse(localStorage.getItem('cart')) || [];\r\n    return cart.filter(item => item !== null && item !== undefined);\r\n}\r\n\r\nfunction saveCart(cart) {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n}\r\n\r\n\r\n// ----------------------------------------"],"mappings":"AAAA;AACA,SAASA,aAAa,QAAQ,kBAAkB;AAEhD,MAAMC,SAAS,GAAG;EACdC,QAAQ,EAAE,EAAE;EACZC,IAAI,EAAEC,SAAS,CAAC;AACpB,CAAC;AAED,OAAO,MAAMC,IAAI,GAAGL,aAAa,CAACC,SAAS,EAAGK,OAAO,IAAK;EACtDA,OAAO,CACFC,OAAO,CAAC,cAAc,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;IACxC,MAAMP,QAAQ,GAAGO,MAAM,CAACC,OAAO,CAACR,QAAQ,CAACS,MAAM,CAACC,OAAO,IAAIA,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAKC,SAAS,CAAC;IACrG,MAAMV,IAAI,GAAGC,SAAS,CAAC,CAAC;IACxB,MAAMU,GAAG,GAAGZ,QAAQ,CAACa,GAAG,CAACC,CAAC,IAAI;MAC1B,MAAMC,QAAQ,GAAGd,IAAI,CAACe,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,CAAC,CAACI,EAAE,CAAC;MAC9C,OAAO;QAAE,GAAGJ,CAAC;QAAEC,QAAQ;QAAEI,KAAK,EAAEJ,QAAQ,GAAG,KAAK,GAAG;MAAO,CAAC;IAC/D,CAAC,CAAC;IACFT,KAAK,CAACN,QAAQ,GAAGY,GAAG;EACxB,CAAC,CAAC,CACDP,OAAO,CAAC,UAAU,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;IACpC,MAAMG,OAAO,GAAGH,MAAM,CAACC,OAAO,CAACE,OAAO;IACtCJ,KAAK,CAACL,IAAI,GAAG,CAAC,GAAGK,KAAK,CAACL,IAAI,EAAES,OAAO,CAAC;IACrCU,QAAQ,CAACd,KAAK,CAACL,IAAI,CAAC;EACxB,CAAC,CAAC,CACDI,OAAO,CAAC,YAAY,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;IACtC,MAAMc,SAAS,GAAGd,MAAM,CAACC,OAAO,CAACE,OAAO,CAACQ,EAAE;IAC3CZ,KAAK,CAACL,IAAI,GAAGK,KAAK,CAACL,IAAI,CAACQ,MAAM,CAACC,OAAO,IAAIA,OAAO,CAACQ,EAAE,KAAKG,SAAS,CAAC;IACnED,QAAQ,CAACd,KAAK,CAACL,IAAI,CAAC;EACxB,CAAC,CAAC;AACV,CAAC,CAAC;AAEF,SAASC,SAASA,CAAA,EAAG;EACjB,MAAMD,IAAI,GAAGqB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;EAC3D,OAAOxB,IAAI,CAACQ,MAAM,CAACiB,IAAI,IAAIA,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAKf,SAAS,CAAC;AACnE;AAEA,SAASS,QAAQA,CAACnB,IAAI,EAAE;EACpBuB,YAAY,CAACG,OAAO,CAAC,MAAM,EAAEL,IAAI,CAACM,SAAS,CAAC3B,IAAI,CAAC,CAAC;AACtD;;AAGA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}