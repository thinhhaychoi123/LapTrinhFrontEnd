{"ast":null,"code":"import { createReducer } from '@reduxjs/toolkit';\nconst initialState = {\n  products: [],\n  cart: checkCart()\n};\nexport const root = createReducer(initialState, builder => {\n  builder.addCase('product.load', (state, action) => {\n    const products = action.payload.products;\n    const cart = state.cart;\n    const updatedProducts = products.map(product => {\n      const isInCart = cart.some(item => item.id === product.id);\n      return {\n        ...product,\n        isBuying: isInCart,\n        color: isInCart ? 'red' : 'blue'\n      };\n    });\n    state.products = updatedProducts;\n  }).addCase('cart.add', (state, action) => {\n    const newProduct = action.payload.product;\n    state.cart = [...state.cart, newProduct];\n    saveCart(state.cart);\n  }).addCase('cart.minus', (state, action) => {\n    const productIdToRemove = action.payload.product.id;\n    const updatedCart = state.cart.filter(product => product.id !== productIdToRemove);\n    state.cart = updatedCart;\n    saveCart(state.cart);\n  });\n});\nfunction checkCart() {\n  const cartFromLocalStorage = localStorage.getItem('cart');\n  return cartFromLocalStorage ? JSON.parse(cartFromLocalStorage) : [];\n}\nfunction saveCart(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}","map":{"version":3,"names":["createReducer","initialState","products","cart","checkCart","root","builder","addCase","state","action","payload","updatedProducts","map","product","isInCart","some","item","id","isBuying","color","newProduct","saveCart","productIdToRemove","updatedCart","filter","cartFromLocalStorage","localStorage","getItem","JSON","parse","setItem","stringify"],"sources":["D:/tour/src/Store/RootReducer.js"],"sourcesContent":["import { createReducer } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n    products: [],\r\n    cart: checkCart(),\r\n};\r\n\r\nexport const root = createReducer(initialState, (builder) => {\r\n    builder\r\n        .addCase('product.load', (state, action) => {\r\n            const products = action.payload.products;\r\n            const cart = state.cart;\r\n\r\n            const updatedProducts = products.map(product => {\r\n                const isInCart = cart.some(item => item.id === product.id);\r\n                return {\r\n                    ...product,\r\n                    isBuying: isInCart,\r\n                    color: isInCart ? 'red' : 'blue',\r\n                };\r\n            });\r\n\r\n            state.products = updatedProducts;\r\n        })\r\n        .addCase('cart.add', (state, action) => {\r\n            const newProduct = action.payload.product;\r\n            state.cart = [...state.cart, newProduct];\r\n            saveCart(state.cart);\r\n        })\r\n        .addCase('cart.minus', (state, action) => {\r\n            const productIdToRemove = action.payload.product.id;\r\n            const updatedCart = state.cart.filter(product => product.id !== productIdToRemove);\r\n            state.cart = updatedCart;\r\n            saveCart(state.cart);\r\n        });\r\n});\r\n\r\nfunction checkCart() {\r\n    const cartFromLocalStorage = localStorage.getItem('cart');\r\n    return cartFromLocalStorage ? JSON.parse(cartFromLocalStorage) : [];\r\n}\r\n\r\nfunction saveCart(cart) {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n}\r\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,kBAAkB;AAEhD,MAAMC,YAAY,GAAG;EACjBC,QAAQ,EAAE,EAAE;EACZC,IAAI,EAAEC,SAAS,CAAC;AACpB,CAAC;AAED,OAAO,MAAMC,IAAI,GAAGL,aAAa,CAACC,YAAY,EAAGK,OAAO,IAAK;EACzDA,OAAO,CACFC,OAAO,CAAC,cAAc,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;IACxC,MAAMP,QAAQ,GAAGO,MAAM,CAACC,OAAO,CAACR,QAAQ;IACxC,MAAMC,IAAI,GAAGK,KAAK,CAACL,IAAI;IAEvB,MAAMQ,eAAe,GAAGT,QAAQ,CAACU,GAAG,CAACC,OAAO,IAAI;MAC5C,MAAMC,QAAQ,GAAGX,IAAI,CAACY,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CAAC;MAC1D,OAAO;QACH,GAAGJ,OAAO;QACVK,QAAQ,EAAEJ,QAAQ;QAClBK,KAAK,EAAEL,QAAQ,GAAG,KAAK,GAAG;MAC9B,CAAC;IACL,CAAC,CAAC;IAEFN,KAAK,CAACN,QAAQ,GAAGS,eAAe;EACpC,CAAC,CAAC,CACDJ,OAAO,CAAC,UAAU,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;IACpC,MAAMW,UAAU,GAAGX,MAAM,CAACC,OAAO,CAACG,OAAO;IACzCL,KAAK,CAACL,IAAI,GAAG,CAAC,GAAGK,KAAK,CAACL,IAAI,EAAEiB,UAAU,CAAC;IACxCC,QAAQ,CAACb,KAAK,CAACL,IAAI,CAAC;EACxB,CAAC,CAAC,CACDI,OAAO,CAAC,YAAY,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;IACtC,MAAMa,iBAAiB,GAAGb,MAAM,CAACC,OAAO,CAACG,OAAO,CAACI,EAAE;IACnD,MAAMM,WAAW,GAAGf,KAAK,CAACL,IAAI,CAACqB,MAAM,CAACX,OAAO,IAAIA,OAAO,CAACI,EAAE,KAAKK,iBAAiB,CAAC;IAClFd,KAAK,CAACL,IAAI,GAAGoB,WAAW;IACxBF,QAAQ,CAACb,KAAK,CAACL,IAAI,CAAC;EACxB,CAAC,CAAC;AACV,CAAC,CAAC;AAEF,SAASC,SAASA,CAAA,EAAG;EACjB,MAAMqB,oBAAoB,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EACzD,OAAOF,oBAAoB,GAAGG,IAAI,CAACC,KAAK,CAACJ,oBAAoB,CAAC,GAAG,EAAE;AACvE;AAEA,SAASJ,QAAQA,CAAClB,IAAI,EAAE;EACpBuB,YAAY,CAACI,OAAO,CAAC,MAAM,EAAEF,IAAI,CAACG,SAAS,CAAC5B,IAAI,CAAC,CAAC;AACtD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}